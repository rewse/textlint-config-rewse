# カスタムルール

## ja-space-around-half-width-with-spaces

全角文字と半角文字列の間のスペースを、半角文字列にスペースが含まれるかどうかで制御するルール。

### ルールの詳細

このルールは、全角文字と半角文字列の間のスペースの有無を、半角文字列の内容に応じて判定します。

#### スペースを含まない半角文字列

スペースを含まない半角文字列（例: `API`, `URL`, `HTML`）と全角文字の間には、スペースを入れません。

**OK**:
```
これはAPIです
URLを確認してください
HTMLタグを使用します
```

**NG**:
```
これは API です
URL を確認してください
HTML タグを使用します
```

#### スペースを含む半角文字列

スペースを含む半角文字列（例: `Hello World`, `New York`）と全角文字の間には、スペースを入れます。

**OK**:
```
これは Hello World です
New York に行きました
Good Morning と挨拶する
```

**NG**:
```
これはHello Worldです
New Yorkに行きました
Good Morningと挨拶する
```

### 設計の意図

- 単語レベルの半角文字列（技術用語、略語など）は日本語の一部として扱い、スペースなしで自然に読める
- フレーズレベルの半角文字列（複数単語）は独立した要素として扱い、スペースで区切ることで可読性を向上

### 使用方法

```json
{
  "rules": {
    "./rules/ja-space-around-half-width-with-spaces": true
  }
}
```

### 技術的な実装

- `textlint-rule-helper`を使用してノードの処理を最適化
- 全角文字の判定にUnicodeコードポイントを使用
- 半角文字列のシーケンスを抽出して、スペースの有無を判定
- リンク、画像、引用、コードブロック内は検査対象外

### 制限事項

- 半角文字列の前後に複数のスペースがある場合、最初のスペースのみを検出
- 全角スペースは通常のスペースとは異なる扱い
